[
    {
        "type": "structured",
        "name": "criticalErrors",
        "description": "Finds critical errors for the banana team grouped by message and stack trace.",
        "query": "k8s.labels.team = \"banana\" | (severity = \"crit\" ) | groupBy([message, stack_trace])",
        "fields": [
            "message",
            "stack_trace",
            "_count"
        ],
        "outputTemplate": "Error \"{{message}}\" occurred in total: {{_count}} times. The Stack trace is \n---{{stack_trace}}\n---\n\n",
        "joinString": " and "
    },
    {
        "type": "structured",
        "name": "unhandledMessagesErrors",
        "description": "Finds unhandled messages errors.",
        "query": "k8s.labels.team=\"banana\"| message = \"Unacking message: Error while running messageHandler\" | groupBy([message, stack_trace])",
        "fields": [
            "message",
            "stack_trace",
            "_count"
        ],
        "outputTemplate": "Error \"{{message}}\" occurred in total: {{_count}} times. The Stack trace is \n---{{stack_trace}}\n---\n\n",
        "joinString": " and "
    },
    {
        "type": "structured",
        "name": "httpRequestsByStatusCode",
        "description": "Groups http requests by status code.",
        "query": "k8s.labels.team=\"banana\" | http_status = * | groupBy([billing_prjkey, http_status])",
        "fields": [
            "billing_prjkey",
            "http_status",
            "_count"
        ],
        "outputTemplate": "project: {{billing_prjkey}} - {{http_status}} - {{_count}} requests",
        "joinString": "\n"
    },
    {
        "type": "raw",
        "name": "logQuery",
        "description": "Fetches events from a custom query",
        "variables": [
            {
                "name": "rawQuery",
                "description": "The raw query to fetch events from",
                "type": "string",
                "required": true
            }
        ]
    }
]
